---
description: 
globs: *.py
alwaysApply: false
---
**Folder / Module Layout:**

```
repo/
├── grammar/                         # *.g4 live here
│   ├── RegelSpraakLexer.g4
│   └── RegelSpraak.g4
├── src/regelspraak/
│   ├── __init__.py            # re‑export public API shortcuts
│   ├── _antlr/                # generated by `antlr4 … -o src/regelspraak/_antlr`
│   │   └── …                  # RegelSpraakLexer.py, RegelSpraakParser.py, …
│   ├── parsing.py             # glue around the ANTLR classes + IR builder
│   ├── ast.py                 # the IR / AST (all dataclasses + SourceSpan)
│   ├── semantics.py           # symbol table + static checks
│   ├── runtime.py             # "world" objects: Parameter, Instance, Value, Unit …
│   ├── engine.py              # interpreter: Evaluator, TraceSink / TraceEvent
│   ├── errors.py              # ParseError, SemanticError, RuntimeError, …
│   ├── cli.py                 # `python -m regelspraak …`
│   ├── jupyter_kernel.py      # optional, only imported when the kernel is used
│   └── utils.py               # light helpers (memoize, visitor mixin, etc.)
├── tests/                         # Mirrors src structure
│   ├── test_parsing.py
│   ├── test_ast.py
│   ├── test_semantics.py
│   ├── test_runtime.py
│   ├── test_engine.py
│   ├── test_cli.py
│   └── fixtures/ 
├── requirements.txt
└── setup.py
```

**ANTLR Generation Command:**

```bash
make grammar
```

**Build & Test Workflow:**

```bash
make test
```
