---
description: 
globs: *.py
alwaysApply: false
---
**Folder / Module Layout:**

```
repo/
├── grammar/                         # *.g4 live here
│   ├── RegelSpraakLexer.g4
│   └── RegelSpraak.g4
├── src/regelspraak/
│   ├── __init__.py            # re‑export public API shortcuts
│   ├── _antlr/                # generated by `make parser` 
│   │   └── …                  # RegelSpraakLexer.py, RegelSpraakParser.py, …
│   ├── parsing.py             # ANTLR workflow orchestration & error handling
│   ├── builder.py             # ANTLR visitor: converts parse trees to AST/IR
│   ├── ast.py                 # the IR / AST (all dataclasses + SourceSpan)
│   ├── semantics.py           # symbol table + static checks (currently empty)
│   ├── runtime.py             # "world" objects: Parameter, Instance, Value, Unit …
│   ├── engine.py              # interpreter: Evaluator, TraceSink / TraceEvent
│   ├── errors.py              # ParseError, SemanticError, RuntimeError, …
│   ├── cli.py                 # `python -m regelspraak …` 
│   ├── __main__.py            # entry point for `python -m regelspraak`
│   └── repl.py                # interactive REPL functionality
├── tests/                     # Comprehensive test suite
│   ├── test_*.py              # Unit tests for each module
│   ├── resources/             # Test data files
│   └── run_tests.py           # Test runner script
├── examples/                  # Usage examples and demos
├── lib/                       # External libraries (ANTLR jar)
├── requirements.txt
├── setup.py
└── Makefile                   # Build automation
```

**ANTLR Generation Command:**

```bash
make grammar
```

**Build & Test Workflow:**

```bash
make test
```
