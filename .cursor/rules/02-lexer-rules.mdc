---
description: Lexer rules for tokenizing RegelSpraak v2.1.0 language constructs, including keywords, identifiers, and literals
globs: ["*.g4"]
alwaysApply: false
---

# RegelSpraak v2.1.0 ANTLR Grammar - Lexer Rules

**Purpose:**
Define the tokens (lexical elements) for the RegelSpraak language based on the v2.1.0 specification. These rules break the input character stream into meaningful units like keywords, identifiers, literals, and operators.

**Instructions:**
Implement the following lexer rules in the ANTLR v4 grammar file (`RegelSpraak.g4`). Pay attention to potential ambiguities (like `ZIJN`) and the definition chosen for `IDENTIFIER`. Ensure keywords take precedence over identifiers.

**File Pattern:**
pattern: *.g4

**Lexer Rules Snippet:**

```antlr
// --- Keywords (Ensure these have higher priority than IDENTIFIER) ---
REGEL: 'Regel';
BESLISTABEL: 'Beslistabel';
OBJECTTYPE: 'Objecttype';
DOMEIN: 'Domein';
DIMENSIE: 'Dimensie';
EENHEIDSYSTEEM: 'Eenheidsysteem';
PARAMETER: 'Parameter';
FEITTYPE: 'Feittype';
WEDERKERIG_FEITTYPE: 'Wederkerig feittype';
DAGSOORT: 'Dagsoort';
GELDIG: 'geldig';
ALTIJD: 'altijd';
VANAF: 'vanaf';
TM: 't/m'; // Alternative: TOT_EN_MET
TOT_EN_MET: 'tot en met';
TOT: 'tot';
INDIEN: 'indien';
DAARBIJ_GELDT: 'Daarbij geldt:';
WORDT_BEREKEND_ALS: 'moet berekend worden als';
WORDT_GESTELD_OP: 'moet gesteld worden op';
WORDT_GEINITIALISEERD_OP: 'moet geïnitialiseerd worden op';
WORDT_VERDEELD_OVER: 'wordt verdeeld over';
IS: 'is';
ZIJN: 'zijn'; // Ambiguous: Verb vs Possessive Pronoun. Context needed.
HEEFT: 'heeft';
HEBBEN: 'hebben';
MOET: 'moet';
MOETEN: 'moeten';
VOLDOET: 'voldoet';
VOLDOEN: 'voldoen';
AAN: 'aan';
DE: 'de';
HET: 'het';
EEN: 'een';
HIJ: 'hij';
// ZIJN_BEZITTELIJK: 'zijn'; // Difficult to distinguish lexically from verb 'zijn' without context
BEZIELD: '(bezield)';
MV: '(mv:';
KENMERK: 'kenmerk';
BEZITTELIJK: '(bezittelijk)';
BIJVOEGLIJK: '(bijvoeglijk)';
GEDIMENSIONEERD_MET: 'gedimensioneerd met';
EN: 'en';
OF: 'of';
IS_VAN_HET_TYPE: 'is van het type';
ENUMERATIE: 'Enumeratie';
NUMERIEK: 'Numeriek';
TEKST: 'Tekst';
BOOLEAN: 'Boolean';
DATUM_IN_DAGEN: 'Datum in dagen';
DATUM_TIJD_MILLIS: 'Datum en tijd in millisecondes';
PERCENTAGE: 'Percentage';
MET_EENHEID: 'met eenheid';
DECIMALEN: 'decimalen';
GETAL: 'getal';
GEHEEL_GETAL: 'geheel getal';
NEGATIEF: 'negatief';
NIET_NEGATIEF: 'niet-negatief';
POSITIEF: 'positief';
VOOR_ELKE_DAG: 'voor elke dag';
VOOR_ELKE_MAAND: 'voor elke maand';
VOOR_ELK_JAAR: 'voor elk jaar';
BESTAANDE_UIT: ', bestaande uit de';
NA_HET_ATTRIBUUT_MET_VOORZETSEL: '(na het attribuut met voorzetsel';
VOOR_HET_ATTRIBUUT_ZONDER_VOORZETSEL: '(voor het attribuut zonder voorzetsel):';
VAN: 'van';
IN: 'in';
VOOR: 'voor';
OVER: 'over';
OP: 'op';
BIJ: 'bij';
UIT: 'uit';
DAG: 'dag';
MAAND: 'maand';
JAAR: 'jaar';
WEEK: 'week';
KWARTAAL: 'kwartaal';
MILLISECONDE: 'milliseconde';
SECONDE: 'seconde';
MINUUT: 'minuut';
UUR: 'uur';
PLUS: 'plus';
MIN: 'min';
VERMINDERD_MET: 'verminderd met';
MAAL: 'maal';
GEDEELD_DOOR: 'gedeeld door';
GEDEELD_DOOR_ABS: 'gedeeld door (ABS)';
WORTEL_VAN: 'de wortel van';
TOT_DE_MACHT: 'tot de macht';
ABSOLUTE_WAARDE_VAN: 'de absolute waarde van';
TIJDSDUUR_VAN: 'de tijdsduur van';
ABSOLUTE_TIJDSDUUR_VAN: 'de absolute tijdsduur van';
IN_HELE: 'in hele';
EERSTE_PAASDAG_VAN: 'de eerste paasdag van';
TOTAAL_VAN: 'het totaal van';
AANTAL_DAGEN_IN: 'het aantal dagen in';
TIJDSEVENREDIG_DEEL_PER: 'het tijdsevenredig deel per';
AANTAL: 'het aantal';
SOM_VAN: 'de som van';
MAXIMALE_WAARDE_VAN: 'de maximale waarde van';
MINIMALE_WAARDE_VAN: 'de minimale waarde van';
EERSTE_VAN: 'de eerste van';
LAATSTE_VAN: 'de laatste van';
ALLE: 'alle';
GELIJK_AAN: 'gelijk aan';
ONGELIJK_AAN: 'ongelijk aan';
GROTER_DAN: 'groter dan';
GROTER_OF_GELIJK_AAN: 'groter of gelijk aan';
KLEINER_DAN: 'kleiner dan';
KLEINER_OF_GELIJK_AAN: 'kleiner of gelijk aan';
LATER_DAN: 'later dan';
LATER_OF_GELIJK_AAN: 'later of gelijk aan';
EERDER_DAN: 'eerder dan';
EERDER_OF_GELIJK_AAN: 'eerder of gelijk aan';
LEEG: 'leeg';
GEVULD: 'gevuld';
AAN_DE_ELFPROEF: 'aan de elfproef';
NIET: 'niet';
NUMERIEK_MET_EXACT: 'numeriek met exact';
CIJFERS: 'cijfers';
UNIEK: 'uniek';
VERENIGD_MET: 'verenigd met';
CONCATENATIE_VAN: 'de concatenatie van';
GEVUURD: 'gevuurd';
INCONSISTENT: 'inconsistent';
GEDURENDE_DE_TIJD_DAT: 'gedurende de tijd dat';
GEDURENDE_HET_GEHELE: 'gedurende het gehele';
GEDURENDE_DE_GEHELE: 'gedurende de gehele';
PERIODE: 'periode';
GEEN_VAN_DE: 'geen van de';
TEN_MINSTE: 'ten minste';
TEN_HOOGSTE: 'ten hoogste';
PRECIES: 'precies';
EEN_TELWOORD: 'één';
TWEE_TELWOORD: 'twee';
DRIE_TELWOORD: 'drie';
VIER_TELWOORD: 'vier';
NAAR_BENEDEN: 'naar beneden';
NAAR_BOVEN: 'naar boven';
REKENKUNDIG: 'rekenkundig';
RICHTING_NUL: 'richting nul';
WEG_VAN_NUL: 'weg van nul';
AFGEROND_OP: 'afgerond op';
MET_EEN_MINIMUM_VAN: 'met een minimum van';
MET_EEN_MAXIMUM_VAN: 'met een maximum van';
WAARBIJ_WORDT_VERDEELD: ', waarbij wordt verdeeld';
IN_GELIJKE_DELEN: 'in gelijke delen';
NAAR_RATO_VAN: 'naar rato van';
OP_VOLGORDE_VAN: 'op volgorde van';
TOENEMENDE: 'toenemende';
AFNEMENDE: 'afnemende';
BIJ_EVEN_GROOT_CRITERIUM: 'bij even groot criterium';
ALS_ONVERDEELDE_REST_BLIJFT: 'Als onverdeelde rest blijft';
OVER_VERDELING: 'over.';
DD_PUNT: 'dd.';
REGELVERSIE: 'regelversie';
VOLGENDE_VOORWAARDE: 'volgende voorwaarde';
VOLGENDE_VOORWAARDEN: 'volgende voorwaarden';
VOLGEND_CRITERIUM: 'het volgende criterium:';
VOLGENDE_CRITERIA: 'volgende criteria:';
DIE: 'die';
DAT: 'dat';
REKENDATUM: 'Rekendatum';
REKENJAAR: 'Rekenjaar';

// --- Identifiers ---
// Using the flexible version allowing spaces/hyphens internally. Requires careful parsing.
IDENTIFIER : LETTER_PROPERTY (LETTER_PROPERTY | DIGIT_PROPERTY | '-' | ' ')* LETTER_PROPERTY | LETTER_PROPERTY;

// --- Literals ---
NUMBER: MINUS? DIGIT+ (',' DIGIT+)? // Simple decimal/integer
       | MINUS? DIGIT+ '_' DIGIT+ '/' DIGIT+ // Integer part of fraction
       | MINUS? DIGIT+ '/' DIGIT+;          // Simple fraction
PERCENTAGE_LITERAL: NUMBER '%';
STRING_LITERAL: '"' (~["\r\n\\] | '\\' .)*? '"';
ENUM_LITERAL: '\'' (~['\r\n\\] | '\\' .)*? '\'';
WAAR: 'waar'; // Boolean literals (handled also as keywords)
ONWAAR: 'onwaar';
DATE_TIME_LITERAL: DD_PUNT WS? DIGIT{1,2} '-' DIGIT{1,2} '-' DIGIT{4} (WS? DIGIT{2} ':' DIGIT{2} ':' DIGIT{2} '.' DIGIT{3})?;

// --- Operators and Punctuation ---
LPAREN: '(';
RPAREN: ')';
LBRACE: '{';
RBRACE: '}';
COMMA: ',';
DOT: '.';
COLON: ':';
SEMICOLON: ';';
SLASH: '/';
EQUALS: '=';
BULLET: '•';
L_ANGLE_QUOTE: '«';
R_ANGLE_QUOTE: '»';
CARET: '^';
PERCENT_SIGN: '%'; // Can appear standalone in units, handled here? Or rely on PERCENTAGE_LITERAL? Spec uses it in MetEenheid definition.

// --- Whitespace and Comments ---
WS: [ \t\r\n]+ -> skip;
// LINE_COMMENT: '//' .*? '\r'? '\n' -> skip; // Add if needed

// --- Fragments (Helper Lexer Rules) ---
fragment MINUS: '-';
fragment DIGIT : [0-9] ;
fragment LETTER_PROPERTY: [_] | [\p{L}]; // Requires ANTLR Unicode support
fragment DIGIT_PROPERTY: [\p{Nd}];   // Requires ANTLR Unicode support
